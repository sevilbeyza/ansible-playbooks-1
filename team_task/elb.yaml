---
- name: Create Elb
  ec2_elb_lb:
    module: ec2_elb_lb
    key_name: ansible
    name: task_elb
    state: present
    sheme: external
    instance_ids: i-0e0864a993a4b6038
    purge_instance_ids: true
    region: eu-west-2
    subnets:
      - subnet-00bcbb7fdfec17773
      - subnet-08a47152982b03821
      - subnet-0b4b71fdd6338c402
    zones:
      - eu-west-2a 
      - eu-west-2b
      - eu-west-2c
    listeners:
      - protocol: http
        load_balancer_port: 80
        instance_port: 80
    health_check:
      ping_protocol: http
      ping_port: 80
      ping_path: "/status"
      response_timeout: 3
      interval: 5
      unhealthy_threshold: 2
      healthy_threshold: 2
  register: elb

    